# QUáº¢N LÃ Há»† THá»NG THÃ”NG TIN Äá»ŠA ÄIá»‚M DU Lá»ŠCH
- TÃ¡c giáº£: Vi Tuáº¥n Äáº¡t
- MSSV: K215480106088
- Lá»›p: K57KMT
- NgÃ y lÃ m: 2024-06-13
## Chá»©c NÄƒng CÆ¡ Báº£n
### 1. Quáº£n lÃ½
1.1.Quáº£n LÃ½ Äá»‹a Äiá»ƒm Du Lá»‹ch
- ThÃªm Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch: Cho phÃ©p thÃªm má»›i má»™t Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Sá»­a thÃ´ng tin Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch: Cho phÃ©p chá»‰nh sá»­a thÃ´ng tin cá»§a má»™t Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch Ä‘Ã£ tá»“n táº¡i
- XÃ³a Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch: Cho phÃ©p xÃ³a má»™t Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch khá»i cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Xem danh sÃ¡ch Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch: Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ cÃ¡c Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch

1.2. Quáº£n LÃ½ KhÃ¡ch Sáº¡n 
- ThÃªm khÃ¡ch sáº¡n: Cho phÃ©p thÃªm má»›i má»™t khÃ¡ch sáº¡n vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Sá»­a thÃ´ng tin khÃ¡ch sáº¡n: Cho phÃ©p chá»‰nh sá»­a thÃ´ng tin cá»§a má»™t khÃ¡ch sáº¡n Ä‘Ã£ tá»“n táº¡i
- XÃ³a khÃ¡ch sáº¡n: Cho phÃ©p xÃ³a má»™t khÃ¡ch sáº¡n khá»i cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Xem danh sÃ¡ch khÃ¡ch sáº¡n: Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ cÃ¡c khÃ¡ch sáº¡n

1.3. Quáº£n LÃ½ NhÃ  HÃ ng
- ThÃªm nhÃ  hÃ ng: Cho phÃ©p thÃªm má»›i má»™t nhÃ  hÃ ng vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Sá»­a thÃ´ng tin nhÃ  hÃ ng: Cho phÃ©p chá»‰nh sá»­a thÃ´ng tin cá»§a má»™t nhÃ  hÃ ng Ä‘Ã£ tá»“n táº¡i
- XÃ³a nhÃ  hÃ ng: Cho phÃ©p xÃ³a má»™t nhÃ  hÃ ng khá»i cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Xem danh sÃ¡ch nhÃ  hÃ ng: Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ cÃ¡c nhÃ  hÃ ng

1.4. Quáº£n LÃ½ ÄÃ¡nh GiÃ¡
- ThÃªm Ä‘Ã¡nh giÃ¡: Cho phÃ©p thÃªm má»›i má»™t Ä‘Ã¡nh giÃ¡ tá»« khÃ¡ch hÃ ng vá» Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch
- Sá»­a thÃ´ng tin Ä‘Ã¡nh giÃ¡: Cho phÃ©p chá»‰nh sá»­a thÃ´ng tin cá»§a má»™t Ä‘Ã¡nh giÃ¡ Ä‘Ã£ tá»“n táº¡i
- XÃ³a Ä‘Ã¡nh giÃ¡: Cho phÃ©p xÃ³a má»™t Ä‘Ã¡nh giÃ¡ khá»i cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Xem danh sÃ¡ch Ä‘Ã¡nh giÃ¡: Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ cÃ¡c Ä‘Ã¡nh giÃ¡

1.5. Quáº£n LÃ½ KhÃ¡ch HÃ ng
- ThÃªm khÃ¡ch hÃ ng: Cho phÃ©p thÃªm má»›i má»™t khÃ¡ch hÃ ng vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Sá»­a thÃ´ng tin khÃ¡ch hÃ ng: Cho phÃ©p chá»‰nh sá»­a thÃ´ng tin cá»§a má»™t khÃ¡ch hÃ ng Ä‘Ã£ tá»“n táº¡i
- XÃ³a khÃ¡ch hÃ ng: Cho phÃ©p xÃ³a má»™t khÃ¡ch hÃ ng khá»i cÆ¡ sá»Ÿ dá»¯ liá»‡u.
- Xem danh sÃ¡ch khÃ¡ch hÃ ng: Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ cÃ¡c khÃ¡ch hÃ ng

### 2. Chá»©c NÄƒng cÆ¡ báº£n
- TÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch theo tÃªn hoáº·c loáº¡i hÃ¬nh du lá»‹ch
- TÃ¬m kiáº¿m khÃ¡ch sáº¡n hoáº·c nhÃ  hÃ ng theo Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch
- Xem chi tiáº¿t Ä‘Ã¡nh giÃ¡ cá»§a má»™t Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch cá»¥ thá»ƒ
- Xem chi tiáº¿t thÃ´ng tin khÃ¡ch hÃ ng
### 3. Chá»©c NÄƒng NÃ¢ng Cao
- Cáº­p nháº­t tá»•ng sá»‘ sao vÃ  sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡: Tá»± Ä‘á»™ng cáº­p nháº­t tá»•ng sá»‘ sao vÃ  sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡ cá»§a má»™t Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch khi cÃ³ Ä‘Ã¡nh giÃ¡ má»›i Ä‘Æ°á»£c thÃªm vÃ o hoáº·c khi má»™t Ä‘Ã¡nh giÃ¡ bá»‹ xÃ³a hoáº·c chá»‰nh sá»­a.

- Duyá»‡t qua cÃ¡c Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch: Táº¡o thá»§ tá»¥c lÆ°u trá»¯ Ä‘á»ƒ duyá»‡t qua cÃ¡c Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch vÃ  thá»±c hiá»‡n cÃ¡c tÃ­nh toÃ¡n tá»•ng há»£p nhÆ° sá»‘ lÆ°á»£ng khÃ¡ch sáº¡n hoáº·c nhÃ  hÃ ng táº¡i má»—i Ä‘á»‹a Ä‘iá»ƒm.

- BÃ¡o cÃ¡o Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch phá»• biáº¿n: Táº¡o bÃ¡o cÃ¡o hiá»ƒn thá»‹ cÃ¡c Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch phá»• biáº¿n dá»±a trÃªn sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡ vÃ  Ä‘iá»ƒm sá»‘ trung bÃ¬nh.
## Thiáº¿t káº¿ chÆ°Æ¡ng trÃ¬nh trong SQL
### 1. Táº¡o cÃ¡c báº£ng
Báº£ng KhachHang (Pháº£i táº¡o Ä‘áº§u tiÃªn Ä‘á»ƒ cÃ¡c báº£ng khÃ¡c tham chiáº¿u tá»›i)
- IDğŸ”‘: KhÃ³a chÃ­nh Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh má»—i khÃ¡ch hÃ ng má»™t cÃ¡ch duy nháº¥t, tá»± tÄƒng.
- TenKhachHang: TÃªn khÃ¡ch hÃ ng Ä‘Æ°á»£c Ä‘áº·t lÃ  NOT NULL Ä‘á»ƒ Ä‘áº£m báº£o má»—i khÃ¡ch hÃ ng Ä‘Æ°á»£c lÆ°u trá»¯ Ä‘á»u cÃ³ thÃ´ng tin tÃªn. Äiá»u nÃ y cá»±c ká»³ quan trá»ng Ä‘á»ƒ cÃ³ thá»ƒ phÃ¢n biá»‡t vÃ  quáº£n lÃ½ cÃ¡c khÃ¡ch hÃ ng.
- Email: Email cá»§a khÃ¡ch hÃ ng.
- SoDienThoai: Sá»‘ Ä‘iá»‡n thoáº¡i cá»§a khÃ¡ch hÃ ng.

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/4bccf9e6-bc3c-42e9-b17c-32b969ba51b6)
  
Báº£ng DiaDiemDuLich
- IDğŸ”‘: KhÃ³a chÃ­nh, tá»± tÄƒng.
- TenDiaDiem: TÃªn Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch lÃ  thÃ´ng tin cáº§n thiáº¿t vÃ  Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  NOT NULL Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh chÃ­nh xÃ¡c vÃ  Ä‘áº§y Ä‘á»§ cá»§a dá»¯ liá»‡u.
- MoTa: MÃ´ táº£ vá» Ä‘á»‹a Ä‘iá»ƒm.
- DiaChi: Äá»‹a chá»‰ Ä‘á»‹a Ä‘iá»ƒm.
- LoaiHinhDuLich: Loáº¡i hÃ¬nh du lá»‹ch (nghá»‰ dÆ°á»¡ng, tham quan, ...).

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/bf0754f9-8ea6-4529-86b4-751b0b60bcb9)

Báº£ng KhachSan
- IDğŸ”‘: KhÃ³a chÃ­nh, tá»± tÄƒng.
- TenKhachSan: TÃªn khÃ¡ch sáº¡n Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  NOT NULL Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t cá»§a dá»¯ liá»‡u.
- DiaChi: Äá»‹a chá»‰ khÃ¡ch sáº¡n.
- SoSao: Sá»‘ sao cá»§a khÃ¡ch sáº¡n.
- DiaDiemIDğŸ”‘: LÃ  khÃ³a ngoáº¡i (FOREIGN KEY) tham chiáº¿u Ä‘áº¿n ID cá»§a báº£ng DiaDiemDuLich. Äiá»u nÃ y thiáº¿t láº­p má»‘i quan há»‡ giá»¯a cÃ¡c báº£ng vÃ  cho phÃ©p truy cáº­p thÃ´ng tin vá» Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch liÃªn quan tá»›i tá»«ng khÃ¡ch sáº¡n vÃ  nhÃ  hÃ ng.

 ![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/fa99a22a-75aa-4c9e-9272-5639b64e98d6)

Báº£ng NhaHang
- IDğŸ”‘: KhÃ³a chÃ­nh, tá»± tÄƒng.
- TenNhaHang: TÃªn nhÃ  hÃ ng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  NOT NULL Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t cá»§a dá»¯ liá»‡u.
- DiaChi: Äá»‹a chá»‰ nhÃ  hÃ ng.
- LoaiHinhAmThuc: Loáº¡i hÃ¬nh áº©m thá»±c (Ã‚u, Ã, Háº£i sáº£n, ...).
- DiaDiemIDğŸ”‘:  LÃ  khÃ³a ngoáº¡i (FOREIGN KEY) tham chiáº¿u Ä‘áº¿n ID cá»§a báº£ng DiaDiemDuLich. Äiá»u nÃ y thiáº¿t láº­p má»‘i quan há»‡ giá»¯a cÃ¡c báº£ng vÃ  cho phÃ©p truy cáº­p thÃ´ng tin vá» Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch liÃªn quan tá»›i tá»«ng khÃ¡ch sáº¡n vÃ  nhÃ  hÃ ng.

 ![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/0e1d530f-2396-4cc1-b8d1-89e7147d47da)

Báº£ng DanhGia
- IDğŸ”‘: KhÃ³a chÃ­nh, tá»± tÄƒng.
- KhachHangIDğŸ”‘: LÃ  khÃ³a ngoáº¡i (FOREIGN KEY) tham chiáº¿u Ä‘áº¿n ID cá»§a báº£ng KhachHang. Äiá»u nÃ y thiáº¿t láº­p má»‘i quan há»‡ giá»¯a báº£ng DanhGia.
- DiaDiemIDğŸ”‘: LÃ  khÃ³a ngoáº¡i (FOREIGN KEY) tham chiáº¿u Ä‘áº¿n ID cá»§a báº£ng DiaDiemDuLich. Äiá»u nÃ y thiáº¿t láº­p má»‘i quan há»‡ giá»¯a cÃ¡c báº£ng vÃ  cho phÃ©p truy cáº­p thÃ´ng tin vá» Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch liÃªn quan tá»›i tá»«ng khÃ¡ch sáº¡n vÃ  nhÃ  hÃ ng.
- SoSao: Sá»‘ sao Ä‘Ã¡nh giÃ¡.
- BinhLuan: BÃ¬nh luáº­n cá»§a khÃ¡ch hÃ ng.

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/37720870-2e99-43db-935c-ab8077953198)

SÆ¡ Ä‘á»“ thá»±c thá»ƒ liÃªn káº¿t

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/a91efec1-cfd9-4152-9930-90d3637f4929)

### 2.ThÃªm dá»¯ liá»‡u vÃ o cÃ¡c báº£ng

-- ThÃªm dá»¯ liá»‡u vÃ o báº£ng DiaDiemDuLich
```
INSERT INTO DiaDiemDuLich (TenDiaDiem, MoTa, DiaChi, LoaiHinhDuLich) VALUES

(N'ÄÃ  Láº¡t', N'ThÃ nh phá»‘ ngÃ n hoa', N'LÃ¢m Äá»“ng', N'Nghá»‰ dÆ°á»¡ng'),

(N'Háº¡ Long', N'Vá»‹nh biá»ƒn Ä‘áº¹p nháº¥t', N'Quáº£ng Ninh', N'Tham quan');
```
-- ThÃªm dá»¯ liá»‡u vÃ o báº£ng KhachSan
```
INSERT INTO KhachSan (TenKhachSan, DiaChi, SoSao, DiaDiemID) VALUES

(N'KhÃ¡ch sáº¡n ÄÃ  Láº¡t Palace', N'Sá»‘ 12, ÄÆ°á»ng Tráº§n PhÃº', 5, 1),

(N'KhÃ¡ch sáº¡n MÆ°á»ng Thanh', N'Sá»‘ 1, ÄÆ°á»ng Háº¡ Long', 4, 2);
```
-- ThÃªm dá»¯ liá»‡u vÃ o báº£ng NhaHang
```
INSERT INTO NhaHang (TenNhaHang, DiaChi, LoaiHinhAmThuc, DiaDiemID) VALUES

(N'NhÃ  hÃ ng Hoa ÄÃ  Láº¡t', N'Sá»‘ 15, ÄÆ°á»ng Phan Bá»™i ChÃ¢u', N'Ã‚u', 1),

(N'NhÃ  hÃ ng Biá»ƒn VÃ ng', N'Sá»‘ 3, ÄÆ°á»ng BÃ£i ChÃ¡y', N'Háº£i sáº£n', 2);
```
-- ThÃªm dá»¯ liá»‡u vÃ o báº£ng KhachHang
```
INSERT INTO KhachHang (TenKhachHang, Email, SoDienThoai) VALUES

(N'Nguyá»…n VÄƒn A', N'vana@gmail.com', N'0901234567'),

(N'Tráº§n Thá»‹ B', N'thib@gmail.com', N'0912345678');
```

-- ThÃªm dá»¯ liá»‡u vÃ o báº£ng DanhGia
```
INSERT INTO DanhGia (KhachHangID, DiaDiemID, SoSao, BinhLuan) VALUES

(1, 1, 5, N'Ráº¥t Ä‘áº¹p vÃ  thÆ¡ má»™ng!'),

(2, 2, 4, N'Cáº£nh Ä‘áº¹p nhÆ°ng dá»‹ch vá»¥ chÆ°a tá»‘t.');
```
## Thiáº¿t láº­p chá»©c nÄƒng
### 1.Chá»©c nÄƒng cÆ¡ báº£n
1.1.Chá»©c nÄƒng tÃ¬m kiáº¿m thÃ´ng tin

*Láº¥y danh sÃ¡ch cÃ¡c Ä‘á»‹a diá»ƒm du lá»‹ch:
```
	SELECT * FROM DiaDiemDuLich;
```
*Láº¥y danh sÃ¡ch cÃ¡c khÃ¡ch sáº¡n:
```
	SELECT * FROM KhachSan WHERE DiaDiemID = (id cá»§a Ä‘á»‹a Ä‘iá»ƒm cáº§n tÃ¬m);
```
*Láº¥y danh sÃ¡ch cÃ¡c nhÃ  hÃ ng
```
	SELECT * FROM NhaHang WHERE DiaDiemID = (id cá»§a Ä‘á»‹a Ä‘iá»ƒm cáº§n tÃ¬m);
 ```
*Láº¥y danh sÃ¡ch Ä‘Ã¡nh giÃ¡ cho 1 Ä‘á»‹a Ä‘iá»ƒm:
```
	SELECT * FROM DanhGia WHERE DiaDiemID = (id cá»§a Ä‘á»‹a Ä‘iá»ƒm cáº§n tÃ¬m);
 ```
*Láº¥y thÃ´ng tin chi tiáº¿t cá»§a 1 khÃ¡ch hÃ ng:
```
	SELECT * FROM KhachHang WHERE ID = (id cá»§a khÃ¡ch hÃ ng);
 ```
1.2.Chá»©c nÄƒng thÃªm, xÃ³a, sá»­a

- Äá»‹a Ä‘iá»ƒm du lá»‹ch

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/8e0c990c-28c0-4e22-8c57-d2d9096fd8b9)

- KhÃ¡ch sáº¡n

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/8b328396-f8d0-419d-9dbc-ece655c8f5a2)

- NhÃ  hÃ ng

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/f2e64397-acad-4159-b5a8-137177b3ab28)

- ÄÃ¡nh giÃ¡

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/6b052614-1553-4001-a898-2a2a5c6a221c)

### 2.Chá»©c nÄƒng nÃ¢ng cao
- Tá»± Ä‘á»™ng cáº­p nháº­t tá»•ng sá»‘ sao vÃ  sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡ cá»§a má»™t Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch khi cÃ³ Ä‘Ã¡nh giÃ¡ má»›i
```
CREATE TRIGGER trg_UpdateReviewStats

ON DanhGia

AFTER INSERT, UPDATE, DELETE

AS

BEGIN

    -- Xá»­ lÃ½ cho trÆ°á»ng há»£p thÃªm hoáº·c cáº­p nháº­t Ä‘Ã¡nh 
    
    IF EXISTS (SELECT * FROM inserted)
    
    BEGIN
    
        DECLARE @DiaDiemID INT;
	
        SELECT @DiaDiemID = DiaDiemID FROM inserted;

        DECLARE @TotalStars INT;
	
        SELECT @TotalStars = SUM(SoSao) FROM DanhGia WHERE DiaDiemID = @DiaDiemID;

        DECLARE @ReviewCount INT;
	
        SELECT @ReviewCount = COUNT(*) FROM DanhGia WHERE DiaDiemID = @DiaDiemID;

        UPDATE DiaDiemDuLich
	
        SET TongSoSao = @TotalStars, SoLuongDanhGia = @ReviewCount
	
        WHERE ID = @DiaDiemID;
	
    END;

    -- Xá»­ lÃ½ cho trÆ°á»ng há»£p xÃ³a Ä‘Ã¡nh giÃ¡
    
    IF EXISTS (SELECT * FROM deleted)
    
    BEGIN
    
        DECLARE @DiaDiemIDDel INT;
	
        SELECT @DiaDiemIDDel = DiaDiemID FROM deleted;

        DECLARE @TotalStarsDel INT;
	
        SELECT @TotalStarsDel = SUM(SoSao) FROM DanhGia WHERE DiaDiemID = @DiaDiemIDDel;

        DECLARE @ReviewCountDel INT;
	
        SELECT @ReviewCountDel = COUNT(*) FROM DanhGia WHERE DiaDiemID = @DiaDiemIDDel;

        UPDATE DiaDiemDuLich
	
        SET TongSoSao = @TotalStarsDel, SoLuongDanhGia = @ReviewCountDel
	
        WHERE ID = @DiaDiemIDDel;
	
    END;
    
END;
```
- Duyá»‡t qua cÃ¡c Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch vÃ  in ra tÃªn Ä‘á»‹a Ä‘iá»ƒm vÃ  sá»‘ lÆ°á»£ng khÃ¡ch sáº¡n táº¡i Ä‘Ã³
```
CREATE PROCEDURE ListHotelsPerLocation

AS

BEGIN

    DECLARE @locationID INT;
    
    DECLARE @locationName NVARCHAR(255);

        DECLARE location_cursor CURSOR FOR
	
        SELECT ID, TenDiaDiem FROM DiaDiemDuLich;

    OPEN location_cursor;

    FETCH NEXT FROM location_cursor INTO @locationID, @locationName;

    -- Duyá»‡t qua cÃ¡c Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch
    
    WHILE @@FETCH_STATUS = 0
    
    BEGIN
    
        -- In ra tÃªn Ä‘á»‹a Ä‘iá»ƒm vÃ  sá»‘ lÆ°á»£ng khÃ¡ch sáº¡n táº¡i Ä‘Ã³
	
        PRINT 'Äá»‹a Ä‘iá»ƒm: ' + @locationName + ' - Sá»‘ lÆ°á»£ng khÃ¡ch sáº¡n: ' + CAST((SELECT COUNT(*) FROM KhachSan WHERE DiaDiemID = @locationID) AS NVARCHAR(10));

        FETCH NEXT FROM location_cursor INTO @locationID, @locationName;
	
    END;
    

    CLOSE location_cursor;
    
    DEALLOCATE location_cursor;
    
END;
```
- TÃ¬m kiáº¿m thÃ´ng tin

-- Táº¡o má»™t VIEW má»›i cÃ³ tÃªn 'View_HotelInfo' hiá»ƒn thá»‹ khÃ¡ch sáº¡n giáº£m dáº§n cá»§a sao Ä‘Ã¡nh giÃ¡
```
CREATE VIEW View_HotelInfo AS

SELECT 

    ks.ID, -- ID cá»§a khÃ¡ch sáº¡n
    
    ks.TenKhachSan, -- TÃªn cá»§a khÃ¡ch sáº¡n
    
    ks.DiaChi, -- Äá»‹a chá»‰ cá»§a khÃ¡ch sáº¡n
    
    ks.DiaDiemID, -- ID cá»§a Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch liÃªn káº¿t vá»›i khÃ¡ch sáº¡n
    
    dd.TenDiaDiem, -- TÃªn cá»§a Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch
    
    ISNULL(AVG(dg.SoSao), 0) AS TrungBinhSoSao -- TÃ­nh trung bÃ¬nh sá»‘ sao cá»§a cÃ¡c Ä‘Ã¡nh giÃ¡, náº¿u khÃ´ng cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o thÃ¬ tráº£ vá» 0
    
FROM 

    KhachSan ks -- Báº£ng KhachSan
    
LEFT JOIN 

    DiaDiemDuLich dd ON ks.DiaDiemID = dd.ID -- Káº¿t ná»‘i báº£ng DiaDiemDuLich Ä‘á»ƒ láº¥y tÃªn Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch
    
LEFT JOIN 

    DanhGia dg ON ks.ID = dg.DiaDiemID -- Káº¿t ná»‘i báº£ng DanhGia Ä‘á»ƒ láº¥y cÃ¡c Ä‘Ã¡nh giÃ¡ liÃªn quan Ä‘áº¿n khÃ¡ch sáº¡n
    
GROUP BY 

    ks.ID, ks.TenKhachSan, ks.DiaChi, ks.DiaDiemID, dd.TenDiaDiem; -- NhÃ³m theo cÃ¡c cá»™t cáº§n thiáº¿t Ä‘á»ƒ tÃ­nh trung bÃ¬nh sá»‘ sao
    
GO

SELECT * 

FROM View_HotelInfo

ORDER BY TrungBinhSoSao DESC, TenKhachSan ASC;
```
- Káº¿t quáº£

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/2bf23361-3afb-48a8-9959-f15405cb4d7c)

-- Táº¡o VIEW má»›i Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin Ä‘á»‹a Ä‘iá»ƒm du lá»‹ch theo tá»© tá»± giáº£m dáº§n cá»§a sao Ä‘Ã¡nh giÃ¡
```
CREATE VIEW View_DiaDiemDuLich AS

SELECT 

    dd.ID,
    
    dd.TenDiaDiem,
    
    dd.MoTa,
    
    dd.DiaChi,
    
    dd.LoaiHinhDuLich,
    
    ISNULL(AVG(dg.SoSao), 0) AS TrungBinhSoSao,
    
    COUNT(dg.ID) AS TongSoDanhGia
    
FROM 

    DiaDiemDuLich dd
    
LEFT JOIN 

    DanhGia dg ON dd.ID = dg.DiaDiemID
    
GROUP BY 

    dd.ID, dd.TenDiaDiem, dd.MoTa, dd.DiaChi, dd.LoaiHinhDuLich;
    
GO

-- Sá»­ dá»¥ng VIEW Ä‘á»ƒ láº¥y thÃ´ng tin vÃ  sáº¯p xáº¿p

SELECT * 

FROM View_DiaDiemDuLich

ORDER BY TrungBinhSoSao DESC, TenDiaDiem ASC;
```
- Káº¿t quáº£

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/4013994c-772e-4cd7-87a7-3dc5109b1e69)

-- Táº¡o VIEW má»›i cÃ³ tÃªn View_NhaHang Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin nhÃ  hÃ ng vÃ  trung bÃ¬nh sá»‘ sao
```
CREATE VIEW View_NhaHang AS

SELECT

    nh.ID,                           -- ID cá»§a nhÃ  hÃ ng
    
    nh.TenNhaHang,                   -- TÃªn cá»§a nhÃ  hÃ ng
    
    nh.DiaChi,                       -- Äá»‹a chá»‰ cá»§a nhÃ  hÃ ng
    
    nh.LoaiHinhAmThuc,               -- Loáº¡i hÃ¬nh áº©m thá»±c cá»§a nhÃ  hÃ ng
    
    dd.TenDiaDiem,                   -- TÃªn Ä‘á»‹a Ä‘iá»ƒm cá»§a nhÃ  hÃ ng
    
    ISNULL(AVG(dg.SoSao), 0) AS TrungBinhSoSao, -- Trung bÃ¬nh sá»‘ sao cá»§a Ä‘Ã¡nh giÃ¡, náº¿u khÃ´ng cÃ³ Ä‘Ã¡nh giÃ¡ thÃ¬ tráº£ vá» 0
    
    COUNT(dg.ID) AS TongSoDanhGia    -- Tá»•ng sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡ cá»§a nhÃ  hÃ ng
    
FROM 

    NhaHang nh                        -- Tá»« báº£ng NhaHang
    
LEFT JOIN

DiaDiemDuLich dd ON nh.DiaDiemID = dd.ID -- LEFT JOIN vá»›i báº£ng DiaDiemDuLich Ä‘á»ƒ láº¥y tÃªn Ä‘á»‹a Ä‘iá»ƒm liÃªn quan

LEFT JOIN 

    DanhGia dg ON nh.ID = dg.DiaDiemID -- LEFT JOIN vá»›i báº£ng DanhGia Ä‘á»ƒ láº¥y Ä‘Ã¡nh giÃ¡ liÃªn quan
    
GROUP BY 

    nh.ID, nh.TenNhaHang, nh.DiaChi, nh.LoaiHinhAmThuc, dd.TenDiaDiem;
    
GO

-- Sá»­ dá»¥ng VIEW View_NhaHang Ä‘á»ƒ láº¥y thÃ´ng tin vÃ  sáº¯p xáº¿p theo trung bÃ¬nh sá»‘ sao giáº£m dáº§n vÃ  tÃªn nhÃ  hÃ ng tÄƒng dáº§n

SELECT * 

FROM View_NhaHang

ORDER BY TrungBinhSoSao DESC, TenNhaHang ASC;
```
- Káº¿t quáº£

![image](https://github.com/TuanDat23/BTL_HQTCSDL_QuanLyDiaThongTinDiemDuLich/assets/168843736/bea4869c-dfe9-42f8-8d36-954b848da9bb)

